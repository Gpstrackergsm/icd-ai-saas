"use strict";
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", { value: true });
const parser_1 = require("./lib/structured/parser");
const engine_1 = require("./lib/structured/engine");
console.log('Case 7: HTN + CKD Stage 3');
const input7 = "Age: 62\nGender: Female\nEncounter Type: Inpatient\nCondition: Hypertension with Chronic Kidney Disease Stage 3";
const { context } = (0, parser_1.parseInput)(input7);
console.log('Context conditions:');
console.log('  HTN:', (_a = context.conditions.cardiovascular) === null || _a === void 0 ? void 0 : _a.hypertension);
console.log('  Renal CKD:', JSON.stringify((_b = context.conditions.renal) === null || _b === void 0 ? void 0 : _b.ckd));
console.log('  Old CKD:', JSON.stringify(context.conditions.ckd));
const result = (0, engine_1.runStructuredRules)(context);
const allCodes = [result.primary, ...result.secondary].filter(c => c).map(c => c === null || c === void 0 ? void 0 : c.code);
console.log('\nCodes generated (in order):', allCodes);
console.log('Expected: [I12.9, N18.3]');
console.log('Got:', allCodes);
console.log('\n---\nCase 8: HTN + HF');
const input8 = "Age: 70\nGender: Male\nEncounter Type: Outpatient\nCondition: Hypertensive Heart Disease";
const { context: ctx8 } = (0, parser_1.parseInput)(input8);
console.log('Context conditions:');
console.log('  HTN:', (_c = ctx8.conditions.cardiovascular) === null || _c === void 0 ? void 0 : _c.hypertension);
console.log('  HF:', JSON.stringify((_d = ctx8.conditions.cardiovascular) === null || _d === void 0 ? void 0 : _d.heartFailure));
const result8 = (0, engine_1.runStructuredRules)(ctx8);
const allCodes8 = [result8.primary, ...result8.secondary].filter(c => c).map(c => c === null || c === void 0 ? void 0 : c.code);
console.log('\nCodes generated (in order):', allCodes8);
console.log('Expected: [I11.9]');
console.log('Got:', allCodes8);
console.log('Issue: I11.9 expected (without HF), but condition says "Hypertensive Heart Disease" which implies HF');
